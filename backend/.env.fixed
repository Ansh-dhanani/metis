# ========================================
# CORRECTED MONGODB URI FOR RAILWAY
# ========================================

# ❌ WRONG (Your current URI):
# mongodb+srv://dhananiansh01_db_user:LfYrotu6RrkZTfVc@cluster0.lmu9mbh.mongodb.net/?appName=Cluster0
# Missing: database name, TLS parameters

# ✅ CORRECT (Use this in Railway):
MONGO_URI=mongodb+srv://dhananiansh01_db_user:LfYrotu6RrkZTfVc@cluster0.lmu9mbh.mongodb.net/metis_db?retryWrites=true&w=majority&tls=true&tlsAllowInvalidCertificates=false&appName=Cluster0

# Other required variables:
JWT_SECRET=your-jwt-secret-change-this-in-production
FLASK_ENV=production

# Optional:
FRONTEND_URL=https://your-frontend.vercel.app
PRODUCTION_FRONTEND_URL=https://your-frontend.vercel.app

# ========================================
# WHAT WAS FIXED:
# ========================================
# 1. Added database name: /metis_db
# 2. Added TLS: tls=true&tlsAllowInvalidCertificates=false
# 3. Added retryWrites: retryWrites=true&w=majority
# 4. Kept appName: appName=Cluster0

# ========================================
# COPY THIS TO RAILWAY:
# ========================================
# 1. Go to Railway dashboard
# 2. Click your backend service
# 3. Go to "Variables" tab
# 4. Add/Update MONGO_URI with the value above
# 5. Save and wait for auto-redeploy (~1-2 min)

# ========================================
# MONGODB ATLAS NETWORK ACCESS:
# ========================================
# Don't forget to:
# 1. Go to https://cloud.mongodb.com/
# 2. Network Access → Add IP Address
# 3. Allow Access from Anywhere: 0.0.0.0/0
# 4. Click Confirm

# ========================================
# VERIFY IT WORKS:
# ========================================
# After Railway redeploys:
# 1. Open your Railway backend URL
# 2. Should show: "mongodb": "connected"
# 3. Railway logs should show: ✅ MongoDB connected successfully
